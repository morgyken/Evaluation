$(document).ready(function(){$(".wh").keyup(function(){g()});$(".bmi").keyup(function(){h()});function h(){var n=$("#weight").val();var k=$("#height").val();var m="N/A";var l="N/A";if(k&&n){m=(n/(k*k)).toFixed(4);if(m>29.9){l="Obese"}else{if(m<30&&m>24.9){l="Overweight"}else{if(m<24.8&&m>18.5){l="Normal"}else{if(m<18.5){l="Underweight"}}}}}$("#bmi").html(m);$("#bmi_status").html(l)}function g(){var m=$("#hip").val();var l=$("#waist").val();var k="N/A";if(m&&l){k=(l/m).toFixed(4)}$("#ratio").html(k)}$("#vitals_form").submit(function(k){k.preventDefault();e()});$("#vitals_form input").blur(function(){e()});$("#vitals_form textarea").blur(function(){e()});function e(){var k=$("#vitals_form").append('<input type="hidden" name="visit" value="'+VISIT_ID+'" /> ');k=$("#vitals_form").append('<input type="hidden" name="user" value="'+USER_ID+'" /> ');$.ajax({type:"POST",url:VITALS_URL,data:k.serialize()})}$("#notes_form").submit(function(k){k.preventDefault();c()});$("#notes_form input").blur(function(){c()});$("#notes_form textarea").blur(function(){c()});function c(){var k=$("#notes_form").append('<input type="hidden" name="visit" value="'+VISIT_ID+'" /> ');k=$("#notes_form").append('<input type="hidden" name="user" value="'+USER_ID+'" /> ');$.ajax({type:"POST",url:NOTES_URL,data:k.serialize()})}$("#prescription_form").submit(function(k){k.preventDefault();i()});function i(){var l=$("#prescription input[name=drug]").val();var m=$("#prescription input[name=duration]").val();var k=$("#prescription input[name=take]").val();$("#prescribed > tbody").append("<tr><td>"+l+"</td><td>"+k+"</td><td>"+m+"</td></tr>");var n=$("#prescription").append('<input type="hidden" name="visit" value="'+VISIT_ID+'" /> ');n=$("#prescription").append('<input type="hidden" name="user" value="'+USER_ID+'" /> ');$.ajax({type:"POST",url:PRESCRIPTION_URL,data:n.serialize()});$("#prescription").find("input[type=text]").val("")}$("#visit_date").datepicker({dateFormat:"yy-mm-dd",minDate:"-100y",onSelect:function(){a()},constrainInput:false});$("#visit_date_form").submit(function(k){k.preventDefault();a()});function a(){var k=$("#visit_date_form").append('<input type="hidden" name="visit" value="'+VISIT_ID+'" /> ');k=$("#visit_date_form").append('<input type="hidden" name="user" value="'+USER_ID+'" /> ');$.ajax({type:"POST",url:SET_DATE_URL,data:k.serialize(),success:function(){$("#visitdate").html("<i class='fa fa-check-circle'></i> Visit date set")}})}$(".instructions").hide();$("#treatment_form input").blur(function(){j()});$("#treatment_form .check").click(function(){var k=$(this).parent().parent().find("input");if($(this).is(":checked")){k.prop("disabled",false)}else{k.prop("disabled",true)}$(this).prop("disabled",false);j()});function j(){$("#tableHolder").css("display","block");$("#treatment > tbody > tr").remove();var k=0;$("#treatment_form input:checkbox:checked").each(function(){var m=$(this).val();var l=$("#name"+m).html();var o=$("#cost"+m).val();var n=$("#no"+m).val();k+=(o*n);$("#treatment > tbody").append("<tr><td>"+l+"</td><td>"+o+"</td><td>"+n+"</td></tr>")});if(k){$("#treatment > tbody").append("<tr><td>Total</td><td><strong>"+k+"</strong></td><td></td></tr>")}b()}$("#saveTreatment").click(function(){b()});function b(){var k=$("#treatment_form").append('<input type="hidden" name="visit" value="'+VISIT_ID+'" /> ');k=$("#treatment_form").append('<input type="hidden" name="user" value="'+USER_ID+'" /> ');$.ajax({type:"POST",url:TREAT_URL,data:k.serialize()})}$(".date").datepicker({dateFormat:"yy-mm-dd",minDate:0});$(".time").timeAutocomplete({increment:10,auto_value:false});$("#opnotes").submit(function(k){k.preventDefault();f()});$("#opnotes textarea").blur(function(){f()});function f(){var k=$("#opnotes").append('<input type="hidden" name="visit" value="'+VISIT_ID+'" /> ');k=$("#opnotes").append('<input type="hidden" name="user" value="'+USER_ID+'" /> ');$.ajax({type:"POST",url:OPNOTES_URL,data:k.serialize()})}$("#next_steps input").click(function(){d()});function d(){var k=$("#next_steps_result");k.hide();var l=$("#next_steps").append('<input type="hidden" name="visit" value="'+VISIT_ID+'" /> ');l=l.append('<input type="hidden" name="user" value="'+USER_ID+'" /> ');$.ajax({type:"POST",url:VISIT_METAS_URL,data:l.serialize(),success:function(m){if(m){k.html('<br/><i class="fa fa-check-circle"></i> Next steps saved');k.show()}}})}});