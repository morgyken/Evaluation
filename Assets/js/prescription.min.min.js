function setValue(t,e,a,n){$("#email").val(e),$("#phone").val(t),$("#phone1").val(t),$("#fname").val(a),$("#lname").val(n),$("#suggesstion-box").hide(),$("#email1").val(e),$("#phone1").val(t),$("#phone1").val(t),$("#fname1").val(a),$("#lname1").val(n),$("#suggesstion-box1").hide()}function bill(t){if($("#check"+t).is(":checked")){var e=$("#prc"+t).val(),a=$(".qty"+t).val(),n=a*e-$("#discount"+t).val()/100*(a*e),i=parseInt($(".total_bill").val());i+=n,$(".sub_total"+t).val(n),$(".total_bill").val(i),$("input#sum1").val(i.toFixed(2)),$(".sub_total_text"+t).html("<b>Amount:</b> "+n)}else unBill(t)}function unBill(t){var e=$("#prc"+t).val(),a=$(".qty"+t).val()*e,n=parseInt($(".total_bill").val());n>0?n-=a:n=0,$(".sub_total"+t).val(a),$(".total_bill").val(n),$(".sub_total_text"+t).html("<b>Amount:</b> "+a)}function cancelPrescription(t){$.ajax({type:"get",url:prescUR,data:{id:t},success:function(e){$("#"+t+"row").fadeOut(),$("#feedback-box").html(e)}})}$("table").hide(),$("#card, #cheque, #mpesa").hide(),$(document).ready(function(){function t(){var t=0,e=0;$("#tab_logic tbody tr").each(function(a,n){var i=$(n),o=i.find("input[name=qty"+a+"]").val(),s=i.find("input[name=price"+a+"]").val(),l=i.find("input[name=dis"+a+"]").val(),c=o*s,r=0;try{r=o*l*s/100}catch(t){r=0}r&&(e+=parseInt(r)),c&&(t+=parseInt(c),$("#total"+a).html(c-parseInt(r)))}),$("#total").html((t-e).toFixed(2)),$("#discount").html(e.toFixed(2)),$("#net").html((t-e).toFixed(2)),$("#amnt").val((t-e).toFixed(2)),$("#sum").html(t.toFixed(2))}function e(e){$("#item_"+e).select2({theme:"classic",placeholder:"Please select an item",formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(t,e){return"Please enter "+(e-t.length)+" more characters"},formatInputTooLong:function(t,e){return"Please enter "+(t.length-e)+" less characters"},formatSelectionTooBig:function(t){return"You can only select "+t+" items"},formatLoadMore:function(t){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumInputLength:2,allowClear:!0,ajax:{url:PRODUCTS_URL,dataType:"json",cache:!0,data:function(t,e){return{term:t}},results:function(t,e){return{results:t}}}}),$("#addr"+e+" select").on("select2:select",function(a){var n=$(this).find("option:selected"),i=n.data().data.cash_price,o=n.data().data.available,s=n.data().data.batch;INSURANCE&&(i=n.data().data.credit_price),$("#fb"+e).attr("available",o),$("input[name=price"+e+"]").val(i),$("input[name=batch"+e+"]").val(s),$("#original"+e).html(n.data().data.o_price),t()}),$("#addr"+e+" input").keyup(function(){t()}),$(".remove").click(function(e){e.preventDefault(),$(this).closest("tr").remove(),t()})}function a(t){$("#cash, #insurance, #card, #cheque, #mpesa").hide(),$("#"+t).show(),"insurance"===t?$("#customer").hide():$("#customer").show()}function n(t){$("#scheme").empty();var e="",a=$(t).val();a&&$.ajax({url:SCHEMES_URL,data:{id:a},success:function(t){$.each(t,function(t,a){e+='<option value="'+t+'">'+a+"</option>"}),$("#scheme").html(e)}})}var i=3;$("#add_row").click(function(){var t='<td><select name="item'+i+'"  id="item_'+i+'" class=" select2-single" style="width: 100%"></select></td><td><input type="text" name=\'qty'+i+"' id='item_qty_"+i+"'  placeholder='Quantity' value=\"0\" class=\"quantities\"/><input type='hidden' name='batch"+i+"'><span id='fb"+i+"'></span></td><td><span id=\"original"+i+'">0</span></td><td><input type="text" name=\'price'+i+"' placeholder='Price'/></td> <td><input type=\"text\" name='dis"+i+"' placeholder='Discount' value=\"0\"/></td></td><td><span id=\"total"+i+'">0.00</span></td><td><button class="btn btn-xs btn-danger remove"><i class="fa fa-trash-o"></i></button></td>';$("#addr"+i).html(t),$("#tab_logic").append('<tr id="addr'+(i+1)+'"></tr>'),e(i),i++}),e(0),e(1),e(2),$("select[name=payment_mode]").click(function(){a($(this).val())}),$("#phone1, #phone").keyup(function(){$.ajax({type:"get",url:PHONE_URL,data:{type:"phone",key:$(this).val()},beforeSend:function(){$("#phone").css("background","#FFF")},success:function(t){$("#suggesstion-box").show(),$("#suggesstion-box").html(t),$("#suggesstion-box1").show(),$("#suggesstion-box1").html(t),$("#phone").css("background","#FFF")}})}),$("#payment_mode").change(function(){mode=$(this).val(),INSURANCE="insurance"===mode}),$("#company").change(function(){n(this)}),$("body").on("keyup",".quantities",function(){var t=$(this).closest("tr").find("select").find("option:selected").data().data.id,e=$(this).attr("id"),a=e.substring(e.lastIndexOf("_")+1);try{var n=parseInt($("#fb"+a).attr("available"))}catch(t){n=0}n>0?$(this).val()>n?message="<i class='fa fa-times' style='color:red'></i> Only "+n+" available. <a target='blank' href='/inventory/store/products/adjust/"+t+"'> adjust?</a>":message="<i class='fa fa-check' style='color:green'></i> "+n+" avaialable":message="<i class='fa fa-times' style='color:red'></i> Out of stock! <a target='blank' href='/inventory/store/products/adjust/"+t+"'> adjust?</a>",$("#fb"+a).html(message)}),$("table").show()});